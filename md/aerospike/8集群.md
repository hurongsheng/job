### 集群

#### 双活部署
    
    多站点群集和跨数据中心复制提供了两种在主动-主动配置中部署Aerospike的独特机制。 有关使用这两种模型的折衷的更多信息，请参见Aerospike Database 5中的Active-Active Capabilities。

#### 心跳监测

    群集节点使用心跳功能相互跟踪。 使用心跳，节点可以协调自己。 节点是对等的。 没有主节点。 所有节点都跟踪群集中的其他节点。 在节点管理期间，所有群集节点都使用心跳机制检测更改。

#### 高速分布式集群形成

    Paxos-based gossip 算法

- 一个基于paxos的投票算法确保数据在生命周期内始终落入同一个分区，但分区也可以从一台机器迁移到另外一台
- 确保就最小数量的关键共享状态达成一致
 
      此共享状态中最关键的部分是参与集群的节点列表。每当节点到达或离开时，算法都会运行以确保一致。此过程只需几分之一秒。在此阶段之后，每个节点都同意参与者及其在集群中的顺序。使用此信息，可以计算任何事务的主节点以及副本节点。

#### 集群节点故障
    
    当一个节点故障时，其他节点会自动识别到，并做rebalance，重新划分分区和迁移数据
    当一个节点重新回到集群或扩充节点时，也会重新分区和迁移，以使某些分区成为新的主节点

#### 机架意识
- 当配置3个机架且复制因子为3时，每个机架将为给定分区接收一个副本。
- 在这种配置下丢失机架时，假设没有违反paxos-single-replica-limit的规定，每个分区仍将具有3个副本，第一个副本（主副本）将位于一个机架上，第二个副本位于另一个机架上，第三个将位于2个机架中的任何一个上，具体取决于继承列表的顺序。
